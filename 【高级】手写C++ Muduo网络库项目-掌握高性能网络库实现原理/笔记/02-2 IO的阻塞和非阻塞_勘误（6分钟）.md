大家好，这节课呢，我们给大家更正一下，在上节课讲解阻塞和非阻塞时，我们的一个口误就是receive。在一个非阻塞模式下的socket fd上，在接收数据的时候，它的一个返回值的一个描述问题。那么，上节课我们在说，当我们创建一个socket并把它设置工作在一个非阻塞模式下，当我们用receive。这个函数接口从这个socket fd上去接收数据的时候，当网络事件，当网络消息还没有准备好的时候它。

本身是一个阻塞的。模式对吧？那如果我们把这个socket ft设置成非阻塞的话，receive在进行返回值的时候，它是这样子的。就是size，如果等于负一，它表示错误，这个错误分成两部分，各位一个是真的是。啊，这个系统的内部错误，另外一个就是非阻塞返回，也就是说我们上节课给大家去描述的时候把这个。非阻塞返回的情况写到第二个地方了，

对吧啊？那这个呢？我们实际上。那么，在这里边儿，我们给大家更正一下啊。就是size，如果是负一的话。而且number呢l number等于什么？一而更的话。那也就是说，当receive呢，它的返回值负一的时候，它应该是表示两种的，一种是真的发生内部错误了，

我们可能作为我们这一端来说的话，接收到负一的这一端来说的话，我们就可能。可能要去close一下这个socket fd。对吧，那另外一个呢？那并不是发生内部错误了，返回值size=- 1，如果我继续在判断error number等于什么啊，等于1 again，那就表示一个正常的非阻塞返回就是socket fd上没有网络事件。发生对吧？而如果s=0返回值等于零，表示什么意思呀？它表示的是。

网络对端关闭了这个连接，就是对端直接close了socket。OK，如果size大于零的话，就表示receive呢，从这个socket fd上接收到网络事件，接收到的数据的一个字节数。好在这里边更正一下，更正一下啊，那么实际上对于这个Linux系统API的这么一个使用情况的话，大家。可以就保持一个好的习惯啊，保持一个好的习惯，就是经常在我们的这个linux下去用慢命令去查看一下啊，查看一下。

大家看慢来，接一个函数接口，这里边会有一个接口的，一个声明的，一个描述啊。还有一个它的详细信息description。当然，对于慢命令，每一个接口的描述，它都会有一个return value，就是给你介绍它的返回值，而return value返回值介绍。this cost return the number of best received这个函数接口啊，返回的是接收到的字节数啊哦，负1 if an error occurred，

如果有一个错误发生，它会返回负一。FC呃in the event of an error error number is set to indicate the error，而如果说真的是遇见一个错误了，那么全局变量error number会被设置成。相应的一个错误号。啊，the return value will be zero when the peer has performed an orderly。shut down就是如果对端的socket fd做了一个正常的，一个close关闭动作的话，我们这一端。receive处会返回一个，什么会返回一个zero，对吧？那么，

大家注意一下啊，这是它的一个描述。那也就是说，大于零是返回了呃，接收到数据的一个字节数，如果是零，表示对端。关闭了头贴字，如果是负一表示错误，但这个错误是两种，一个是真真正正的内部错误，对吧啊？内部错误。那么在这里边，我们可能呃会去把这个socket ft去close掉，

然后我们可能去。呃，推出系统或者是做相应的一些处理，那么如果说我们判断l number呃，判断这个返回值是负一。而air number是我们这里边描述的error se again，对吧？那这表示什么？the socket is marked number blocking就是这个socket被标记成一个。n blocking非阻塞现在是一个非阻塞返回。好吧，那么大家在这里边把返回值的一个信息嗯，大家更正一下，实际上对于1 again跟一五的block来说的话，你看1 again all 15的block，

这两个是应该是一样的。我用这个命令打印一下。ouldblock 15的block，那它它俩的一个错误号是一模一样的，所以大家去判断1 again。在这里边就可以了。好，那这节课我们给大家把我们上节课的这个receive工作在非阻塞模式下的套节字的一个返回值，给大家去纠正一下希望。大家把这里边啊也。把这里边的知识这个记准确好，那我们这节课就说到这。