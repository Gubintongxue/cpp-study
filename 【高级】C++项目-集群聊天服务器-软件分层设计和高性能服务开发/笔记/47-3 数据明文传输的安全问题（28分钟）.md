项目面试问题，

## 第一个数据安全问题

第一个我们很多同学会问到的数据安全嗯，大家做完项目，

这里边项目的具体内容我就不说了，大家都熟悉，我们相当于是一个明文的交互，

采用的是json做序列化和反序列化。

我们确实是从这个登录，从注册这个基本的业务开始呢，跟后端的服务交互呢，全都是明文的交互。

相当于之前大家在浏览器上啊，去访问这个web后端的时候用的都是HTTP协议啊，现在都是https协议对吧？



其中之一主要的原因就是数据非常的不安全，确实是涉及了这么一个问题。

那么，如果面试官啊，问到大家你这项目这个客户端跟服务器交互都是明文啊，有没有考虑到数据安全问题？

那如果你考虑到的话，你怎么解决呃？大家这个简单的说，我要加密。

### 加密 怎么加密

那肯定是加密是没错，但关键是问题的核心是面试官，问到这个问题是希望你能够尽量的去做一个全面的。而且真的是能够按照你说的能实现的这么一个解决方案出来。

你说的这个加密吧，而说你说错了，没错，确实那肯定得加密嘛，你明文传输那不就得密文传输吗？哎呦，说说对了，你是？你就光说个加密，什么也不解释，那你没有任何的可行性啊，对不对啊？所以呢，像这样的话，其实说出来跟没说是一个意思。

啊，面试官可能是微微一笑，他就过去了。对吧，你心里也很挠，你都不知道他这笑是啥意思，那一笑是对我回答问题，回答对了，欣慰的笑还是对我回答问题，回答的不好，一种蔑视的笑啊。对吧，其实大家面试的时候不用想那么多，关键就是说你像你这种回答问题，那肯定是不行的，

而我们回答问题呢？嗯，就是。啊，这样的啊，你像这种那有些同学说老师那我确实不知道，我只能说加密怎么办？那你也给人家去做一下解释。你跟面试官是属于聊技术，不是说在考试不要像这个老师跟学生一样啊，就好像呢，就是赶紧把答案说出来，好这个其其余的话我也不敢说了。你在面试啊，人家也是想找一个这个不错的，

这个人人才是不是啊？加入公司做开发。那么你尽量去描述，尽量去把自己能说的说一下呃，那你就可以这样说嘛啊，那么呃，我觉得如果是铭文传述的话，那么要考虑的肯定就是要。做密文传输了，要做密文传输的话，就得引入一种加密解密的算法机制了啊。这个传输之前要进行加密啊，传输对端接收以后要进行一种解密啊，但是我之前呢，由于啊做项目的过程中对于加解密这一块呢。

呃，没有考虑的非常完全啊，所以呢，没有去自己实现过呃，加密解密啊，没有引入过加密解密的这个算法。呃，在项目中，所以对于这块的一个具体的实现方案啊，我应该是思路是没有问题的，但是具体怎么实现我这个可能需要？去借鉴一些资料啊，去具体实现一下，我才能够呃完全清楚，那你看你这样说一下是不是？

就是一个聊的态度。对不对啊？我们跟朋友聊嘛啊，聊这么一个过程呢，那不管是会还是会一点还是完全不会，我们总得说一点东西出来，你不能说。呃，人家面试官问。怎么考虑数据安全啊？加密。哎呀，面试官都不想跟你聊了。是吧啊你，你根本就不会去聊嘛，

你说个加密，你说加密二字，那这个方案就出来了，怎么加密？用什么加密？什么时候加密，什么时候解密，这些东西你都说一下嘛，就像我们刚才给大家做的这么一个演示，那你比如像有些同学呢，我们在面试的时候啊，我们有些同学被问到了。这个说一下b加数啊b加数是我们索引数据库索引的实现原理对吧啊，但是我们同学就没有说是按照这个面试官的思路来啊，我这个b加数。

他之前b加数没有准备太多，或者说时间长，他忘了，而我项目实现的过程中呢，这个b加数涉及的比较少一点，我项目过程中。用的map用的比较多一点啊，map底层都是红黑树的，这个实现啊，那红对于红黑树的这个实现啊，包括它的一些。呃，插入删除啊，旋转啊，几点着色的原理我还是比较清楚的，

那看面试官我能不能呃这个把红黑树呢，着重给你去说一下。这些都是一些聊的策略啊，聊的策略这个面试的策略。呃，这一方面呢？我们同学们跟同学们之间有天然的差异，我是切身能感受到有些同学的这个思路就非常的活，有些同学呢就是。面试的时候不敢说，不愿意说啊，就很好像呢，这个整个面试就是你人生最黑暗的时刻。不要这样，这应该是你人生即将踏入辉煌时刻的这个。

前一刻那个就是呃。就前一刻那么一个。最后一道坎了是吧啊，你完全放松自己的心态，展现出自己的一个沟通能力。是不是你的赢面会很大的？赢面会很大的。如果我们答问题会了，我们这个你就答的全面，不会的或会一点的。而我看尽量能不能把我的这个问题我包装一下，给出我以我的能力能够分析到位的一些描述。那至于具体的我分析不到的啊，我这个具体的这个实现方案是怎么样的，因为我我们可以给他解释一下我们之前的项目开发过程中，

我没有涉及过。啊，但是他可能需要考虑哪些东西啊？这个呢呃，具体做的话，我可能需要查一些啊，什么什么什么东西才能够对他？真真正正的掌握啊，这样的一些描述也可以的呀。对吧啊，你不管面试官打不打断你，你该怎么说？你说你自己的就行了。好了吧啊。行，

那在这里边又是传授了一些项目面试的经验啊，在这里边呢，我们来具体说一下这个问题吧，首先呢，在这里边我们。给大家做一个知识的扩展储备吧，首先在这里做，要做这个数据的加解密啊，加密和解密是没有问题的啊，大家的这个。主体的思路是对的，但在这这里边，大家要注意加密跟解密算法，在这里边涉及了两种，一种是就是我这里边给大家写的对称加密。

算法一种是非对称。加密算法。一般我们真真正正项目，就比如说我们这个腾讯的这个微信啊，企业微信跟政务微信，他们的这个。客户端跟服务器通信呢，它都是用了加密算法肯定的，对吧？但是它用了这个对称跟非对称的这个混合加密。那为什么加密一个还不够，为什么非要用两个那么这两个之间到底有什么区别呢？那在这里边，这节课我给大家好好的说道说道啊。那在这儿呢，

我先来说一下对称加密对称加密是什么意思呀？对称加密就是说我这个是客户端。啊，客户端。我要给你服务器发送消息。我在这里边啊，有一个密钥。k密钥可能是由你客户端的这个啊，某些信息吧啊来随机生成的。呃，一个。密钥好吧，你用这个密钥呢，要把我发送的这个消息，比如说我发送的登录消息login。

什么张三？张三还有一二三四五六呃，加密一下，加密成密文啊，加密成这个密文。加密成密文。用密钥把这个加密成密文，然后再进行网络上进行传输，那这样的话，在网络节点上。有人偷窥哈，有人抓取这个消息的话，他也看不懂啊，是吧啊，他也看不懂，

他也看不懂。所有的加密算法都是可以被破解的，包括md 5啊。但是呢，我们说加密算法安不安全，对吧？它如果这个加密算法破解是需要100年才能破解，以现在地球上计算机最好的计算机算力。去破解100年才能破解的话，我们也认为这个加密算法是安全的。好不好啊？那么，在这里边大家看啊，收到了这个密文以后在服务端我要干嘛呀？哎，

我要解密，解密的话就跟我进门一样，进这个密文里边，我得要密钥，我得要钥匙啊。是不是我得要你这个密钥啊？对称加密就是加密方跟解密方用的都是怎么样哎？同一个密钥同学们，这个就叫做。对称加密应该有的研究生同学呃，专门是学密码学的，应该对这个应该是非常了解啊，应该是比我还要了解。哈哈，对吧？

因为专业的会涉及很多数学上的一些理论啊。这个概念很简单吧，加密跟解密用同是同一个密钥，我把明文加密成密文啊。啊，明文加密成密文用这把密钥来加密的，把这个密文再还原成什么？把这个密文哎再还原成这个明文在服务端。它也是需要什么？也是需要这个密钥的。那么，在这里边同学们。我服务端首先是在这里边，我怎么知道你客户端的这个密钥呢？服务端怎么知道这个客户端的这个密钥呢？

嗯，怎么知道？难道你在通信之前先要把这个密钥在网络上，从客户端传给服务器吗？或者说是那你为什么不在服务器生成密钥好，那你在服务器生成密钥的话，那你是不是一开始先要服务器把这个密钥先给到客户端啊？你不管怎么样，你不能把这个密钥在网络上传输啊，你把这个密钥在网络上传输，不就把你们家大门的钥匙你直接放到你们家这个门外面的这个。大马路上一样嘛，谁捡着了？是不都可以开你家门啊？那这肯定是不行的，

密钥你这个不能在，不能直接在网络上传输的，这肯定是不行的，对吧啊？那在这里边就是用对称加密啊，直接呢在CS这个通信上。进行数据加密的话，这个密钥是一个比较大的问题。是一个比较大的问题。但是呢，对称加密啊，由于它加密解密嗯，它都比较简单，所以呢，它的这个。

加解密。啊，效率。啊，都是比较高的，那我们一般用的这个aes加密。啊加解密算法。嗯，大家可以在网上到处都有as的这个加解密算法的源码，大家可以呃。把它拉下来看一看。那么，这就是一个对称加密好吧，我简单这么一说。非对称加密。

顾名思义，加密跟解密用的不是同一把钥匙是吧？在非对称加密里边就有两个概念了，一个是。什么某某某点pub这种叫做公钥啊，也还有某某某点pri这个叫什么？private叫私钥哎，叫私钥。公钥跟私钥。非对称加密啊，这里边啊。它有这么一特点就是。诶，重新拷贝一份啊。就是这个公钥加密的数据，

只能是这个私钥才能解出来。这个私钥加密的东西呢，只能这个公钥才能解除，就是这公钥跟私钥是一一配对的。好吧，我们大家经常用这个git HUB，或者说是gi tee啊，我们国内的马云这个git远程代码仓库。啊，你们要推代码，是不是经常都要先去配置一个公钥啊？你在你本地啊机器上生成一对公司钥。是吧啊，生成一对公司钥以后呢，然后把公钥配置到什么上去，

配置到你的这个远程的代码仓库页面上去是吧？是不是所以整个通信的加密啊，也采用了非对称加密，它有这么一特点？这个公钥公钥加密的东西只能用私钥来解密这个私钥。啊，加密的东西只能用什么啊？只能用公钥来解密。好不好？这相当于就是用公钥加密的这个。用私钥加密的东西啊，一般可以以就是数字证书嘛啊，数字证书的方式呢提供。啊，提供大家可以下载这个证书啊，

这个相当于就是一个。相当于是个身份验证啊，身份认证的一个东西就跟你的学历，你的学历可以证明呃，你的那个毕业证可以证明你的一个。呃，证明你自己嘛，从哪毕业的？包括你的学历是吧啊？银行要一般会用私钥加密一个。呃，信息摘要得到一个数字证书，我我们。个人呢？需要登录一些银行的一些关键性的，

一些网站的时候需要下载这个数字证书，对吧啊？需要下载这个数字证书。那数字证书的话呢，在这里边我们就会验证啊，你这个。银行的这么一个身份好吧啊，印证你这个。因为私钥一般都是不会给外界提供的啊，给外界提供的都是公钥public嘛，公钥是这个公钥是谁都能看到的是吧啊？如果公钥呢？呃，能够解出来这个证书里边的这个内容，那就是私钥加密的，

只有公钥能解密吗？是吧啊，那就证明呢，这个公私钥呢是一对的。是不是啊？这个供应就是银行提供给你的啊，那你可以放心的使用你别。那些欺诈网站给你提供了一个公钥，你直接拿人家的公钥当做银行的公钥去加密的东西，直接发到直接发送出去了，人家那些的在网络上截取你的这个信息。是不是把这个你用人家的公钥加密的，然后就人家用人家的私钥就可以解密了，然后得到你的账号密码信息，岂不是就可以进行一些非法操作了吗？

对不对啊？那么在这里边就是非对称加密，非对称加密呢？它的这个特点啊，同学们是。嗯，这个加密。这个复杂。效率慢。少年们。但是非常非常什么非常安全。啊，这个对于这个非对称加密有rse。加减密算法。这些网上开源的也都比较多啊，

都可以直接用我们大家如果想用的话。这两个可以记住aes对称加密rsa，非对称加密。这个加解密算法应该是非常多的啊，不仅仅限于这些。嗯，那么把这个引入到我们的这个客户端服务器，这聊天服务器。客户端跟服务器通信上怎么弄呢啊？同学们。首先呢，我们结合两个加解密算法的特征，也就是说呢。这个服务端啊，服务端server端人家会有一个什么rsa的？

私钥，然后呢？客户端代码里边就集成了一个什么？rsa的这个公钥。好吧啊，同学们去安装人家的客户端的时候呢，就是安装我们的客户端的时候直接这个客户端里边就已经有了这个rsa的功钥了。啊ric的公钥。那么在这里边。我们进行通信的时候，那大家第一步是干什么啊？第一步一上来是不是connect连接服务器啊？我们代码上嘛，连接服务器连接上以后就要怎么样呢交换？因为因为同学们这个问后续能不能就用rsa这个公钥加密呃发送到这个服务端，

服务端用rsa私钥去解密可以是可以没有问题的，但是我们说了这个rsa的加解密呢是？比较复杂的，所以导致我们效率慢，如果你用纯rsa公钥跟私钥进行加密解密，实现上没有问题，但是呢？我们整个的通信效率就急速的降低下来了，好吧，所以我们一般就会用这个非对称加密跟对称加密它们各自的一些优点。那么，这个是连接成功了connect，先连接成功啊，连接成功。然后呢？

交换交换交换什么啊？交换密钥。在这里边，我们rsa的公钥。先把谁？先把这个。aes这个对称加密算法的这个密钥。k加密成什么？密文通过网络发送出去。那么同学们。谁要是在网络上把这段。截获了能看出来不看不出来，这是密文啊，而且是用这个rsa公钥。加密的密文只有它对应的，

我们服务端的rsa私钥是不是才能够去解密啊？RSS要在服务端，它不会去向网络任何地方传输的啊。你就是把这个密文拿到，对于128位的rsa啊，这个非对称加密。你要去破解它，你可能得好几十年以现在计算机的算力来说的话，所以我们认为它是非常安全的。好在这里边传到这个服务端啊，服务端呢就可以干什么用？rsa私钥。哎，私钥。从这个密文里边。

得到客户端，想给我服务器提供的什么aes？这个密钥k。好啦，那在这里边呢，我们服务端。是不是就可以在这儿？既做解密，又可以做验证啊，如果解密以后发现解密失败了，那就证明呢，你给服服务端发送过来的消息，并不是用服务端的公钥。啊，加密得到的，

那肯定是有人随意攻击，有人模拟发包，是不是给我这个服务端发送消息啊？我就可以直接拒绝掉了。好的吧，只有我这客户端运用了我的这个公钥啊，才能够怎么样呃，才能够这个加密。加密这个密钥。到我的这个服务端，如果解析成功的话，我们会给这个客户端，比如说回一个OK，那在这里边就表示呢两个人。交换什么？

交换as加解密算法的这个密钥k交换成功啦，交换成功了，以后呢？那我们后续再进行通信的时候。哎，你就可以怎么样？客户端就可以用简单的aes加密加解密效率比较高啊aes的这个密钥k，把原始的铭文加密一下，得到密文通过网络发送。到我们服务端啊，服务端呢，找见这个用户，每个用户都有ID嘛啊，找见这个用户啊。在刚开始连接以后交换的这个过来的这个密钥，

把这个密文解释一下啊，这个解密一下就得到他的这个密文了。所以我们最终还是用aes加解密保证数据的安全的，但是我们有没有在网络上直接明文交换这个密钥k啊没有？那怎么交换这个密钥k呢？通过非对称加密。啊，以一种安全的方式在客户端跟服务器之间来交换了这个aes的密钥k。那么，同学们是否听明白了呢？呃，思路就是这个样子的，就是说那我们在回答这个问题的时候，那你现在有这个出知识储备了，那你就可以说啊。

就我对这，你要解决这个问题，肯定数据得是以密文进行啊，交互那数据要加密的话，在这里边常用的有这个据我了解啊。大家也不要说的这个跟背课文一样，对吧？一一股脑儿背过去了，很明显你这个时间准备的嘛。嗯，这据我了解，这个加密应该有对称加密跟非对称加密啊，如果用纯对称加密的话。在这里边就涉及客户端跟服务器啊，要交换一个密钥。

对吧啊，要交换一个密钥，那在这里边呢，势必密钥在网络上要进行明文传输，这也是不可能的，不安全的，所以。所以一般来说啊，如我我虽然在项目上没有实现，但是如果让我实现的话，我会选择这样，我会选择在先生成一对公司要。啊先生成一对公司要这个服务器端啊，有这个私钥在代码上写好了，这个私钥客户端。

代码上写好了，这个公钥在客户端跟服务器connect成功连接，成功以后TCP三次握手，成功以后首先我要duang增加一个步骤，就是交换这个。啊，对称加密的密钥，因为最终选择对称加密是因为对称加密的效率啊，加解密效率会比较高一点，如果整个的通讯全部采用非对称加密，安全是安全了，但是通信的效率是非常低的，因为它这个。加密的时耗费时间，解密也非常耗费时间啊。

然后呢，我客户端用这个rsa公钥把这个as的这个密钥k先加密成密文啊，发到这个服务端，其中间就是被别人获取到了，因为他没有私钥，他也是没有办法去解密的。啊，这个服务端解密以后呢？就得到当前这个用户。是不是跟当前这个用户通信的aes密钥k了，然后回复一个OK？是吧啊，然后后边呢那个客户端跟服务器就可以通过这个交换好的aes密钥进行一个对称加密的一个数据传输了，效率也是比较高的，也可以保证数据的安全性。

没有问题吧，当然每一个用户，每一个客户端，以这样的方式都可以生成不同的一个密钥k无所谓啊，我们在这个数据库的这个。呃，数据库里边，比如说我们可以记录下来啊，记录下来每一个用户，每一个账号ID对应的它通信的这个as密钥k是个什么？对吧啊，那么当有客户端发过来以后呢？好，我们在这里边。就可以找着啊，

这个客户端就可以找着这个客户端对应的一个什么？啊，因为发过来都是密文是吧啊，发过来都是密文。如果全部都用密文的话，那我们就找不着跟这客户端通信的密钥k是在哪了？对吧那嗯，实际上无所谓，我们在实际上传输的时候呢？就是。user ID无所谓。1 ID我们可以把它啊，明文这个写出来，然后这里边的这个message essage message body。啊，

因为我们带了user ID，比如说我们登录有用户名密码之类的是吧？注册的话有用户名啊？这个还有其他的邮箱啊，手机电话之类的，我们可以把重要的信息进行这个加密，那么到达服务端的话，可以根据这个user ID。得到什么啊？得到跟这个客户端专门通信用的这个。as me,OK?或者说是我们在这里边，其实解决方案挺多的，因为客户端还可以在这通过发送什么客户端的这个设备的唯一标识。

啊，就跟我们主机的这个嗯，网卡的这个MAC地址一样，都是全球都是唯一的，对吧？啊，这个携带一个这个信息。只要我们能够在客户在服务端区分这个as密钥k是属于哪一个客户端的就可以了啊？不管你是通过发送一个。嗯，这个唯一的设备ID来标识还是说是你把user ID给它明文公布出来都行，都可以啊，都可以，其他的这个消息采用。加密传输啊。

好，那么这个问题就是给大家说了一下，我们用这个对称加密跟非对称加密，相当于做了一个混合加密嗯，既兼顾了数据的安全性，又提高了通信的一个效率。啊，这里边给大家啊解答了这个问题，希望大家好好的思考一下啊，下次再碰见这个问题的话，希望。不要成为你的拦路虎啊。那么同样呢，还是刚才给大家强调的。不会的问题。

我刚才也给大家演示了，我们不要说不会，或者应该是加密吧，加密这样说啊，不太好。你会的吧。不要，就是感觉跟中了彩票一样，很高兴的吧啦啦啦，一下子就把这说完了是吧？中间不带一点停顿的，而感觉好像跟事先备好了一样。啊，实际上对于这种问题的回答就是面试官等待的就是面试官更多的问题会抛出来，甚至会更复杂的问题。

好，我们。遇见会解答的问题，你心里可以暗喜，但是你不要表现出来，我们还是稳稳当当的啊，就是故作这个。啊，故作思考啊啊，大家思考思考，再慢慢的到来好不好啊？这样呢，我们有一个回答问题的感觉嘛。呃，让面试官也能感受到这个问题，

确实难到我了，但是呃，我对于我来说，我以我的知识储备还是能够慢慢的去把这个问题呃，很有条理的去给他分析出来的。呃，这就是最好的一个面试的效果。所以为什么我经常说是面试整个技术只占40%，沟通也占同等重要的百分之四十百分之20，还是需要大家有一些运气的。但这个运气呢，就体现在你回答问题的细节，准备各种各样问题的细节，细节处好吧。行，

那我们这节课说到这。